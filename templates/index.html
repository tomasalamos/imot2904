{% extends "layout.html" %}

{% block content %}
  <h1>Upload CSV File</h1>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form action="/form" method="post" enctype="multipart/form-data">
      <label for="file-upload" class="custom-file-upload btn btn-secondary">
          Choose File
      </label>
      <input id="file-upload" type="file" name="file" required>
      <span id="file-name">No file selected</span>
      <button type="submit" class="btn btn-warning mt-2">Upload and Continue</button>
  </form>

  <script>
    const input = document.getElementById('file-upload');
    const fileNameDisplay = document.getElementById('file-name');

    input.addEventListener('change', function() {
      fileNameDisplay.textContent = input.files.length > 0 ? input.files[0].name : 'No file selected';
    });
  </script>

  <style>
    input[type="file"] {
      display: none;
    }

    .custom-file-upload {
      padding: 0.6rem 1rem;
      cursor: pointer;
    }

    #file-name {
      margin-left: 1rem;
      font-style: italic;
    }
  </style>
{% endblock %}
